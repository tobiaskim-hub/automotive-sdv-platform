# FleetFlag - íƒ€ ì‹œìŠ¤í…œ ì—°ë™ ëª…ì„¸ì„œ

**System Integration Specification**

---

## ë¬¸ì„œ ì •ë³´

| í•­ëª© | ë‚´ìš© |
|------|------|
| ë¬¸ì„œëª… | FleetFlag íƒ€ ì‹œìŠ¤í…œ ì—°ë™ ëª…ì„¸ì„œ |
| ë²„ì „ | v1.0 |
| ì‘ì„±ì¼ | 2026-02-01 |
| ì‘ì„±ì | FleetFlag Team |
| ìƒíƒœ | ğŸŸ¡ Review |
| ë¶„ë¥˜ | CONFIDENTIAL |
| ê¸°ë°˜ | ì´ì„±ë£¡ ë¶€ì¥ ë¯¸íŒ… (2026-01-15) |

---

## ëª©ì°¨

1. [ì—°ë™ ê°œìš”](#1-ì—°ë™-ê°œìš”)
2. [CodeBeamer (ALM) ì—°ë™](#2-codebeamer-alm-ì—°ë™)
3. [BOM System (PLM) ì—°ë™](#3-bom-system-plm-ì—°ë™)
4. [SUMS (SW Update) ì—°ë™](#4-sums-sw-update-ì—°ë™)
5. [Production (ê³µì¥) ì—°ë™](#5-production-ê³µì¥-ì—°ë™)
6. [CCU / Telemetry ì—°ë™](#6-ccu--telemetry-ì—°ë™)
7. [ë°ì´í„° íë¦„ë„](#7-ë°ì´í„°-íë¦„ë„)

---

## 1. ì—°ë™ ê°œìš”

### 1.1 ë°°ê²½

í˜„ëŒ€ì°¨ì˜ Feature Flag ì‹œìŠ¤í…œì€ **ë‹¨ë…ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼**, ê¸°ì¡´ ë ˆê±°ì‹œ ì‹œìŠ¤í…œë“¤ê³¼ ìœ ê¸°ì ìœ¼ë¡œ ì—°ê²°ë˜ì–´ **ë°ì´í„° ì‚¬ì¼ë¡œë¥¼ í•´ê²°**í•˜ê³ , **ìš”êµ¬ì‚¬í•­-ê¸°íš-ê°œë°œ-ìƒì‚°-ìš´ì˜**ê¹Œì§€ì˜ ì „ì²´ ë¼ì´í”„ì‚¬ì´í´ì„ í†µí•© ê´€ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.

> "í…ŒìŠ¬ë¼ëŠ” SWì™€ HWë¥¼ í•¨ê»˜ ë°”ê¿¨ê¸° ë•Œë¬¸ì— ë¹ ë¥¼ ìˆ˜ ìˆì—ˆë‹¤. í˜„ëŒ€ì°¨ëŠ” ë ˆê±°ì‹œì™€ì˜ ì—°ë™ ì—†ì´ëŠ” ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ë‹¤."  
> â€” ì´ì„±ë£¡ ë¶€ì¥, 2026-01-15

---

### 1.2 ì—°ë™ ì‹œìŠ¤í…œ ë§µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        External Systems                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ CodeBeamer   â”‚    â”‚ BOM System   â”‚    â”‚    SUMS      â”‚     â”‚
â”‚  â”‚   (ALM)      â”‚    â”‚   (PLM)      â”‚    â”‚ (SW Update)  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                   â”‚                    â”‚             â”‚
â”‚         â”‚ Requirements      â”‚ HW Info            â”‚ OTA Package â”‚
â”‚         â”‚ ASIL Grade        â”‚ Part No.           â”‚ Version     â”‚
â”‚         â”‚                   â”‚                    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚                    â”‚
          â–¼                   â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FleetFlag System                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               Control Plane (ì„œë²„)                        â”‚  â”‚
â”‚  â”‚  - Admin Console                                         â”‚  â”‚
â”‚  â”‚  - Policy Engine (ì •ì±… ì—”ì§„)                              â”‚  â”‚
â”‚  â”‚  - Integration Gateway (ì—°ë™ ê²Œì´íŠ¸ì›¨ì´)                  â”‚  â”‚
â”‚  â”‚  - Audit Log                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                     â”‚
â”‚                           â”‚ Config File (JSON/YAML)             â”‚
â”‚                           â”‚ Encrypted, Signed                   â”‚
â”‚                           â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               Vehicle Plane (ì°¨ëŸ‰)                        â”‚  â”‚
â”‚  â”‚  - Feature Flag SDK (Evaluator)                          â”‚  â”‚
â”‚  â”‚  - Local Cache                                           â”‚  â”‚
â”‚  â”‚  - Safety Gatekeeper                                     â”‚  â”‚
â”‚  â”‚  - Sync Agent                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Telemetry Data
                            â”‚ (ì˜¤ë¥˜ìœ¨, ì‚¬ìš©ë¥ )
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  Production  â”‚    â”‚ CCU/Telemetryâ”‚                          â”‚
â”‚  â”‚   (ê³µì¥)      â”‚    â”‚  (ì°¨ëŸ‰ í†µì‹ )  â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 1.3 ì—°ë™ ì‹œìŠ¤í…œ ê°œìš”

| ì‹œìŠ¤í…œ | ì—­í•  | ë°ì´í„° íë¦„ | í•µì‹¬ ëª©ì  |
|--------|------|-----------|----------|
| **CodeBeamer** | ìš”êµ¬ì‚¬í•­ ê´€ë¦¬ (ALM) | ì–‘ë°©í–¥ | ìš”êµ¬ì‚¬í•­-í”¼ì²˜-í”Œë˜ê·¸ Traceability |
| **BOM System** | ë¶€í’ˆ ê´€ë¦¬ (PLM) | BOM â†’ FleetFlag | í•˜ë“œì›¨ì–´ ì˜ì¡´ì„± ê²€ì¦ |
| **SUMS** | SW ì—…ë°ì´íŠ¸ | FleetFlag â†’ SUMS | OTA íŒ¨í‚¤ì§€ ë°°í¬ |
| **Production** | ê³µì¥ ìƒì‚° | ì–‘ë°©í–¥ | íƒœê·¸ ê¸°ë°˜ ìë™ ì„¤ì • |
| **CCU/Telemetry** | ì°¨ëŸ‰ í†µì‹  | Vehicle â†’ FleetFlag | ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ë° Kill Switch |

---

## 2. CodeBeamer (ALM) ì—°ë™

### 2.1 ê°œìš”

**CodeBeamer**ëŠ” í˜„ëŒ€ì°¨ì˜ ALM(Application Lifecycle Management) ë„êµ¬ë¡œ, ìš”êµ¬ì‚¬í•­-ê¸°íš-ê°œë°œ-í…ŒìŠ¤íŠ¸ë¥¼ í†µí•© ê´€ë¦¬í•©ë‹ˆë‹¤.

**ì—°ë™ ëª©ì **:
- ìš”êµ¬ì‚¬í•­(Requirement) IDì™€ Feature Flagë¥¼ ë§¤í•‘í•˜ì—¬ **Traceability** í™•ë³´
- ê¸°íš ì˜ë„, ASIL ë“±ê¸‰ ë“± ë©”íƒ€ë°ì´í„° ë™ê¸°í™”
- ë³€ê²½ ì´ë ¥ ìë™ ì¶”ì 

---

### 2.2 ë°ì´í„° íë¦„

```
CodeBeamer                                FleetFlag System
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Requirement ID: 1234 â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ Flag Key:            â”‚
â”‚ Name: ADAS LKA v2    â”‚     REST API    â”‚   adas_lka_v2        â”‚
â”‚ ASIL: D              â”‚                 â”‚ ASIL: D              â”‚
â”‚ Owner: ê¹€ì² ìˆ˜         â”‚                 â”‚ Owner: ê¹€ì² ìˆ˜         â”‚
â”‚ Status: Approved     â”‚                 â”‚ Status: Active       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                         â”‚
         â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
         â”‚         Webhook (Status Change)        â”‚
         â”‚                                         â”‚
```

---

### 2.3 REST API ëª…ì„¸

#### 2.3.1 CodeBeamer â†’ FleetFlag (ìš”êµ¬ì‚¬í•­ ë™ê¸°í™”)

**Endpoint**: `POST /api/v1/integrations/codebeamer/requirements`

**Request:**
```json
{
  "requirement_id": "REQ-1234",
  "name": "ADAS Lane Keep Assist v2",
  "description": "ì°¨ì„  ìœ ì§€ ì•Œê³ ë¦¬ì¦˜ ê°œì„ ",
  "asil_grade": "ASIL-D",
  "owner": {
    "email": "kim@hyundai.com",
    "name": "ê¹€ì² ìˆ˜"
  },
  "status": "Approved",
  "created_at": "2026-01-15T10:00:00Z",
  "updated_at": "2026-01-20T14:00:00Z"
}
```

**Response:**
```json
{
  "flag_id": "uuid",
  "flag_key": "adas_lka_v2",
  "requirement_id": "REQ-1234",
  "synced_at": "2026-01-20T14:05:00Z"
}
```

---

#### 2.3.2 FleetFlag â†’ CodeBeamer (í”Œë˜ê·¸ ìƒíƒœ ì—…ë°ì´íŠ¸)

**Webhook URL**: `https://codebeamer.hyundai.com/api/webhooks/fleetflag`

**Payload:**
```json
{
  "event": "flag.updated",
  "flag_key": "adas_lka_v2",
  "requirement_id": "REQ-1234",
  "changes": {
    "enabled": true,
    "rollout_percentage": 75
  },
  "updated_by": "admin@hyundai.com",
  "timestamp": "2026-02-01T12:00:00Z"
}
```

---

### 2.4 Traceability Matrix

| CodeBeamer ìš”êµ¬ì‚¬í•­ ID | Feature Flag Key | ASIL ë“±ê¸‰ | ìƒíƒœ | ìµœì¢… ì—…ë°ì´íŠ¸ |
|----------------------|------------------|----------|------|-------------|
| REQ-1234 | adas_lka_v2 | ASIL-D | Active (75%) | 2026-02-01 |
| REQ-1235 | battery_opt_v3 | Safety-Relevant | Testing (25%) | 2026-01-30 |
| REQ-1236 | new_ui_theme | Non-Critical | Production (100%) | 2026-01-28 |

---

## 3. BOM System (PLM) ì—°ë™

### 3.1 ê°œìš”

**BOM(Bill of Materials) System**ì€ ì°¨ëŸ‰ë³„ ì¥ì°©ëœ ë¶€í’ˆ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” PLM(Product Lifecycle Management) ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

**ì—°ë™ ëª©ì **:
- **í•˜ë“œì›¨ì–´ ì˜ì¡´ì„± ê²€ì¦**: "ì¹´ë©”ë¼ê°€ ì¥ì°©ë˜ì§€ ì•Šì€ ì°¨ëŸ‰ì—ëŠ” ADAS ê¸°ëŠ¥ì„ ì¼œì§€ ëª»í•˜ê²Œ í•œë‹¤"
- **EO(Engineering Order) ì‹œì  í”„ë¦¬ì¦ˆ**: ì„¤ê³„ ë³€ê²½ ì‹œì ì˜ BOM í˜•ìƒì„ ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ ì €ì¥

> "BOM ì—°ë™ ì—†ì´ëŠ” í•˜ë“œì›¨ì–´ê°€ ì—†ëŠ”ë° ê¸°ëŠ¥ì„ ì¼œëŠ” ì‚¬ê³ ê°€ ë°œìƒí•œë‹¤."  
> â€” ì´ì„±ë£¡ ë¶€ì¥

---

### 3.2 ë°ì´í„° íë¦„

```
BOM System                                FleetFlag System
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VIN: KMH1234...      â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ Vehicle Profile:     â”‚
â”‚ Model: Ioniq 5 Gen2  â”‚     REST API    â”‚   VIN: KMH1234...    â”‚
â”‚ Parts:               â”‚                 â”‚ HW Dependencies:     â”‚
â”‚  - Camera: ABC123    â”‚                 â”‚  - Camera: Required  â”‚
â”‚  - Radar: DEF456     â”‚                 â”‚  - Radar: Required   â”‚
â”‚  - LiDAR: None       â”‚                 â”‚  - LiDAR: Missing âŒ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â”‚ Validation
                                                   â–¼
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚ Flag: adas_lka_v2    â”‚
                                         â”‚ HW Requirement:      â”‚
                                         â”‚  - Camera: âœ…        â”‚
                                         â”‚  - Radar: âœ…         â”‚
                                         â”‚  - LiDAR: âŒ         â”‚
                                         â”‚ Result: BLOCKED      â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.3 REST API ëª…ì„¸

#### 3.3.1 BOM â†’ FleetFlag (ì°¨ëŸ‰ BOM ë™ê¸°í™”)

**Endpoint**: `POST /api/v1/integrations/bom/vehicles`

**Request:**
```json
{
  "vin": "KMH1234567890ABCD",
  "model": "Ioniq 5 Gen2",
  "production_date": "2026-01-15",
  "eo_version": "EO-2026-001",
  "parts": [
    {
      "part_number": "ABC123",
      "part_name": "Front Camera",
      "category": "Sensor",
      "installed": true
    },
    {
      "part_number": "DEF456",
      "part_name": "Front Radar",
      "category": "Sensor",
      "installed": true
    },
    {
      "part_number": "GHI789",
      "part_name": "LiDAR",
      "category": "Sensor",
      "installed": false
    }
  ]
}
```

**Response:**
```json
{
  "vin": "KMH1234567890ABCD",
  "vehicle_profile_id": "uuid",
  "hw_capabilities": ["camera", "radar"],
  "blocked_features": ["lidar_based_adas"],
  "synced_at": "2026-01-15T14:00:00Z"
}
```

---

### 3.4 HW ì˜ì¡´ì„± ë§¤íŠ¸ë¦­ìŠ¤

| Flag Key | í•„ìˆ˜ HW | ì„ íƒ HW | ë°°íƒ€ì  HW |
|----------|---------|---------|----------|
| adas_lka_v2 | Camera, Radar | - | - |
| avp_parking | Camera (4ê°œ), Ultrasonic | LiDAR | - |
| battery_fast_charge | High-Voltage Battery | - | Legacy Battery |
| hda2_plus | Camera, Radar, GPS | LiDAR | - |

---

### 3.5 BOM Freeze (EO ì‹œì  ìŠ¤ëƒ…ìƒ·)

**Endpoint**: `POST /api/v1/bom/freeze`

**Request:**
```json
{
  "eo_number": "EO-2026-001",
  "freeze_date": "2026-01-20T00:00:00Z",
  "vehicle_range": {
    "model": "Ioniq 5 Gen2",
    "production_start": "2026-02-01",
    "production_end": "2026-12-31"
  }
}
```

**Response:**
```json
{
  "freeze_id": "uuid",
  "eo_number": "EO-2026-001",
  "bom_snapshot": {
    "total_vehicles": 50000,
    "hw_variants": [
      {
        "variant_id": "VAR-001",
        "count": 30000,
        "parts": ["Camera", "Radar"]
      },
      {
        "variant_id": "VAR-002",
        "count": 20000,
        "parts": ["Camera", "Radar", "LiDAR"]
      }
    ]
  },
  "frozen_at": "2026-01-20T00:00:00Z"
}
```

---

## 4. SUMS (SW Update) ì—°ë™

### 4.1 ê°œìš”

**SUMS(Software Update Management System)**ëŠ” í˜„ëŒ€ì°¨ì˜ OTA(Over-The-Air) ì†Œí”„íŠ¸ì›¨ì–´ ì—…ë°ì´íŠ¸ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

**ì—°ë™ ëª©ì **:
- Flag ì •ì±… íŒŒì¼ì„ SUMS OTA íŒ¨í‚¤ì§€ì— í¬í•¨í•˜ì—¬ ë°°í¬
- **UN R156 ë²•ê·œ** ì¤€ìˆ˜: SW ë²„ì „ê³¼ Flag ì •ì±… ë²„ì „ì˜ ë™ê¸°í™”

---

### 4.2 ë°ì´í„° íë¦„

```
FleetFlag System                          SUMS System
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Flag Policy:         â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ OTA Package:         â”‚
â”‚  - adas_lka_v2: ON   â”‚   File Upload   â”‚  - SW Version: 2.5.2 â”‚
â”‚  - battery_opt: OFF  â”‚                 â”‚  - Flag Policy: v1.3 â”‚
â”‚  - Version: 1.3      â”‚                 â”‚  - Signature: ...    â”‚
â”‚  - Signature: ...    â”‚                 â”‚  - Release Date      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â”‚ OTA Push
                                                   â–¼
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚ Vehicle (VIN: KMH...) â”‚
                                         â”‚ Install Package      â”‚
                                         â”‚ Verify Signature     â”‚
                                         â”‚ Apply Policy         â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.3 REST API ëª…ì„¸

#### 4.3.1 FleetFlag â†’ SUMS (OTA íŒ¨í‚¤ì§€ ìƒì„±)

**Endpoint**: `POST /api/v1/integrations/sums/packages`

**Request:**
```json
{
  "package_name": "FleetFlag_Policy_v1.3",
  "sw_version": "UMOS_2.5.2",
  "target_vehicles": {
    "model": "Ioniq 5 Gen2",
    "region": "KR",
    "vin_list": ["KMH1234...", "KMH5678..."]
  },
  "policy_file": {
    "url": "https://fleetflag.hyundai.com/policies/v1.3.json",
    "checksum": "sha256:abcd1234...",
    "signature": "RSA:efgh5678..."
  },
  "release_date": "2026-02-05T00:00:00Z"
}
```

**Response:**
```json
{
  "package_id": "uuid",
  "ota_url": "https://sums.hyundai.com/packages/uuid",
  "status": "pending_approval",
  "created_at": "2026-02-01T14:00:00Z"
}
```

---

### 4.4 Policy File í¬ë§· (JSON)

```json
{
  "version": "1.3",
  "issued_at": "2026-02-01T14:00:00Z",
  "expires_at": "2026-08-01T00:00:00Z",
  "signature": "RSA:...",
  "flags": [
    {
      "key": "adas_lka_v2",
      "enabled": true,
      "rollout_percentage": 75,
      "hw_requirements": ["camera", "radar"],
      "sw_version_min": "2.5.0"
    },
    {
      "key": "battery_fast_charge",
      "enabled": false,
      "reason": "Kill Switch: Battery overheat issue"
    }
  ]
}
```

---

## 5. Production (ê³µì¥) ì—°ë™

### 5.1 ê°œìš”

**ê³µì¥ ìƒì‚° ë¼ì¸**ì—ì„œ ì°¨ëŸ‰ íƒœê·¸(Tag)ë¥¼ ì¸ì‹í•˜ë©´, FleetFlag ì‹œìŠ¤í…œì´ í•´ë‹¹ ì°¨ì¢…ì— ë§ëŠ” Flag ì„¤ì •ê°’ì„ ìë™ìœ¼ë¡œ ë°˜í™˜í•˜ì—¬ **ì‘ì—…ì ê°œì… ì—†ì´ SW í˜•ìƒì„ ìë™ ì„¤ì •**í•©ë‹ˆë‹¤.

**ì—°ë™ ëª©ì **:
- **Auto-Configuration**: íƒœê·¸ ì¸ì‹ â†’ Flag ì„¤ì • ìë™ ì ìš©
- **Zero-Touch Provisioning**: ì‚¬ëŒ ì‹¤ìˆ˜ ì œê±°

---

### 5.2 ë°ì´í„° íë¦„

```
Production Line                           FleetFlag System
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Tag Scan          â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ 2. Query Config      â”‚
â”‚    VIN: KMH1234...   â”‚     REST API    â”‚    VIN: KMH1234...   â”‚
â”‚    Model: Ioniq 5    â”‚                 â”‚    Model: Ioniq 5    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                         â”‚
         â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
         â”‚     3. Return Flag Config (JSON)       â”‚
         â”‚                                         â”‚
         â–¼                                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚ 4. Flash to Vehicle  â”‚                          â”‚
â”‚    Apply Config      â”‚                          â”‚
â”‚    Done âœ…           â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
```

---

### 5.3 REST API ëª…ì„¸

#### 5.3.1 Production â†’ FleetFlag (ì„¤ì • ì¡°íšŒ)

**Endpoint**: `GET /api/v1/integrations/production/config`

**Query Parameters:**
- `vin` (required): ì°¨ëŒ€ë²ˆí˜¸
- `model` (required): ì°¨ì¢… (ì˜ˆ: Ioniq 5 Gen2)
- `region` (optional): ì§€ì—­ (ì˜ˆ: KR)

**Response:**
```json
{
  "vin": "KMH1234567890ABCD",
  "model": "Ioniq 5 Gen2",
  "region": "KR",
  "config": {
    "version": "1.3",
    "flags": [
      {
        "key": "adas_lka_v2",
        "enabled": true
      },
      {
        "key": "avp_parking",
        "enabled": false
      },
      {
        "key": "battery_fast_charge",
        "enabled": true
      }
    ]
  },
  "generated_at": "2026-02-01T14:00:00Z"
}
```

---

## 6. CCU / Telemetry ì—°ë™

### 6.1 ê°œìš”

**CCU(Central Communication Unit)**ëŠ” ì°¨ëŸ‰ê³¼ í´ë¼ìš°ë“œ ê°„ì˜ í†µì‹ ì„ ë‹´ë‹¹í•˜ë©°, **Telemetry ë°ì´í„°**(ì˜¤ë¥˜ìœ¨, ì‚¬ìš©ë¥ , ì„¼ì„œ ìƒíƒœ)ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì§‘í•©ë‹ˆë‹¤.

**ì—°ë™ ëª©ì **:
- Flag ì ìš© ê²°ê³¼ ëª¨ë‹ˆí„°ë§
- Kill Switch ê¸´ê¸‰ ëª…ë ¹ ì „ë‹¬
- Shadow Mode ë°ì´í„° ìˆ˜ì§‘ (A/B í…ŒìŠ¤íŠ¸)

---

### 6.2 ë°ì´í„° íë¦„

```
Vehicle (CCU)                             FleetFlag System
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Telemetry Data    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ 2. Store Metrics     â”‚
â”‚    Flag: adas_lka_v2 â”‚     gRPC        â”‚    Timestamp         â”‚
â”‚    Status: Active    â”‚                 â”‚    VIN               â”‚
â”‚    Error Rate: 0.03% â”‚                 â”‚    Error Rate        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                         â”‚
         â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
         â”‚   3. Kill Switch Command (WebSocket)   â”‚
         â”‚      Flag: adas_lka_v2 â†’ DISABLED      â”‚
         â”‚                                         â”‚
         â–¼                                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚ 4. Apply Kill Switch â”‚                          â”‚
â”‚    Disable Flag      â”‚                          â”‚
â”‚    Log Event         â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
```

---

### 6.3 gRPC í”„ë¡œí† ì½œ (Telemetry)

```protobuf
syntax = "proto3";

service TelemetryService {
  rpc ReportMetrics(MetricBatchRequest) returns (MetricBatchResponse);
}

message MetricBatchRequest {
  string vin = 1;
  repeated Metric metrics = 2;
}

message Metric {
  string flag_key = 1;
  string metric_name = 2;  // "error_rate", "usage_count"
  double value = 3;
  int64 timestamp = 4;     // Unix timestamp (ms)
  map<string, string> tags = 5;
}

message MetricBatchResponse {
  int32 accepted_count = 1;
  int32 rejected_count = 2;
}
```

---

### 6.4 WebSocket í”„ë¡œí† ì½œ (Kill Switch)

**ì—°ê²° URL**: `wss://fleetflag.hyundai.com/ws/vehicles/{vin}`

**Kill Switch ë©”ì‹œì§€:**
```json
{
  "type": "KILL_SWITCH",
  "flag_key": "adas_lka_v2",
  "timestamp": "2026-02-01T10:15:00Z",
  "reason": "Safety issue: False positive in highway scenarios",
  "severity": "CRITICAL"
}
```

**ì°¨ëŸ‰ ì‘ë‹µ:**
```json
{
  "type": "KILL_SWITCH_ACK",
  "flag_key": "adas_lka_v2",
  "vin": "KMH1234567890ABCD",
  "applied_at": "2026-02-01T10:15:03Z",
  "status": "DISABLED"
}
```

---

## 7. ë°ì´í„° íë¦„ë„

### 7.1 ì „ì²´ ë°ì´í„° íŒŒì´í”„ë¼ì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CodeBeamer  â”‚ â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                   â”‚ Requirements
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ ASIL Grade
â”‚ BOM System  â”‚ â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                   â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  FleetFlag    â”‚
           â”‚  Control      â”‚ â”€â”€â”€â”
           â”‚  Plane        â”‚    â”‚ Policy File
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ (JSON)
                   â”‚             â”‚
                   â”‚ Config      â–¼
                   â–¼      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   SUMS    â”‚
           â”‚  Production   â”‚    â”‚  (OTA)    â”‚
           â”‚  (Factory)    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
                   â”‚                 â”‚ OTA Push
                   â”‚ Flash           â”‚
                   â–¼                 â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚    Vehicle (CCU)          â”‚
           â”‚  - SDK Evaluator          â”‚
           â”‚  - Safety Gatekeeper      â”‚
           â”‚  - Local Cache            â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Telemetry
                   â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  FleetFlag    â”‚
           â”‚  Analytics    â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. ë³´ì•ˆ ë° ë¬´ê²°ì„±

### 8.1 ì •ì±… íŒŒì¼ ì„œëª… (Signing)

**ì•Œê³ ë¦¬ì¦˜**: RSA 2048-bit

**í”„ë¡œì„¸ìŠ¤**:
1. FleetFlag ì„œë²„ê°€ ì •ì±… íŒŒì¼ ìƒì„±
2. Private Keyë¡œ SHA-256 í•´ì‹œì— ì„œëª…
3. ì •ì±… íŒŒì¼ + ì„œëª…ì„ ë°°í¬
4. ì°¨ëŸ‰ SDKê°€ Public Keyë¡œ ì„œëª… ê²€ì¦

**ì˜ˆì‹œ**:
```json
{
  "version": "1.3",
  "flags": [...],
  "checksum": "sha256:abcd1234...",
  "signature": "RSA:efgh5678..."
}
```

---

### 8.2 í†µì‹  ì•”í˜¸í™”

| ì—°ë™ | í”„ë¡œí† ì½œ | ì•”í˜¸í™” |
|------|----------|--------|
| CodeBeamer â†” FleetFlag | REST API | TLS 1.3 |
| BOM â†” FleetFlag | REST API | TLS 1.3 |
| FleetFlag â†” SUMS | REST API | TLS 1.3 |
| Production â†” FleetFlag | REST API | TLS 1.3 (ë‚´ë¶€ë§) |
| Vehicle â†” FleetFlag | gRPC | mTLS |
| Vehicle â†” FleetFlag | WebSocket | WSS (TLS 1.3) |

---

## 9. ì—ëŸ¬ ì²˜ë¦¬

### 9.1 BOM ë°ì´í„° ëˆ„ë½

**ì‹œë‚˜ë¦¬ì˜¤**: BOM ì‹œìŠ¤í…œì—ì„œ ì°¨ëŸ‰ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ

**ì²˜ë¦¬**:
1. FleetFlagëŠ” **ë³´ìˆ˜ì  ê¸°ë³¸ê°’(Conservative Default)** ì ìš©
2. ëª¨ë“  HW ì˜ì¡´ì  ê¸°ëŠ¥ì€ ë¹„í™œì„±í™”
3. ì•Œë¦¼ ì „ì†¡ (Slack/Teams)

---

### 9.2 SUMS ë°°í¬ ì‹¤íŒ¨

**ì‹œë‚˜ë¦¬ì˜¤**: OTA íŒ¨í‚¤ì§€ ë°°í¬ ì¤‘ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜

**ì²˜ë¦¬**:
1. ì°¨ëŸ‰ì€ ë¡œì»¬ ìºì‹œ ì‚¬ìš© (7ì¼ TTL)
2. ì¬ì‹œë„ ë¡œì§ (Exponential Backoff)
3. ìµœì¢… ì‹¤íŒ¨ ì‹œ Default Valueë¡œ ë³µêµ¬

---

## 10. ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ì‘ì„±ì | ë³€ê²½ ë‚´ìš© |
|------|------|--------|-----------|
| v1.0 | 2026-02-01 | FleetFlag Team | ì´ˆì•ˆ ì‘ì„± (ì´ì„±ë£¡ ë¶€ì¥ ë¯¸íŒ… ë°˜ì˜) |

---

**ë¬¸ì„œ ë**
